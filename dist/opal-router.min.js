!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("rionite")):"function"==typeof define&&define.amd?define(["rionite"],e):"object"==typeof exports?exports["opal-router"]=e(require("rionite")):t["opal-router"]=e(t.rionite)}(this,function(t){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};n(18),n(19);var r=n(3),i=r.Component,a=r.utils,u=a.hyphenize,p=a.escapeHTML,s=n(20),c=n(21),l=n(22),f=Object.create,m=Array.prototype.forEach;t.exports=i.extend("opal-router",{_route:null,_componentElement:null,ready:function(){var t=this._routes=[];m.call(this.element.querySelectorAll("opal-route"),function(e){var n=e.$c.props.path,o=l(n),r=[],i=[];!function a(t){for(var e=0,n=t.length;e<n;e++){var o=t[e];switch(o.type){case c.NORMAL:r.push(s(o.value).replace("\\*",".*?"));break;case c.OPTIONAL:r.push("("),i.push({name:o.name,optional:!0}),a(o.childNodes),r.push(")?");break;case c.INSERT:r.push("([^\\/]+)"),i.push({name:o.name,optional:!1})}}}(o),r=r.join(""),r+="/"==r.charAt(r.length-1)?"?":"/?",t.push({path:n,rePath:RegExp("^"+r+"$"),properties:i,componentName:e.$c.props.component})})},elementAttached:function(){this._update(),this.listenTo(window,"popstate",this._onWindowPopState)},elementDetached:function(){this._route&&(this._route=null,this._clear())},_onWindowPopState:function(){this._update()},_update:function(){for(var t=this,e=this._routes,n=location.hash.slice(1)||"/",r=(function(o,r){var i=e[o],a=n.match(i.rePath);if(a){var u=i.properties.reduce(function(t,e,n){return t[e.name]=e.optional?!!a[n+1]:a[n+1],t},f(null));if(i===t._route){for(var p=t._componentElement,s=p.attributes,c=s.length;c;){var l=s.item(--c);l.name in u||p.removeAttribute(l.name)}t._applyState(u)}else{t._clear(),t._route=i;var m=t._componentElement=document.createElement(i.componentName);m.$c.ownerComponent=t,t._applyState(u),t.element.appendChild(m)}return{v:void 0}}}),i=0,a=e.length;i<a;i++){var u=r(i,a);if("object"===("undefined"==typeof u?"undefined":o(u)))return u.v}this._route&&(this._route=null,this._clear())},_applyState:function(t){var e=this._componentElement;for(var n in t){var o=t[n];e.setAttribute(u(n),""+(o===!1?"no":o===!0?"yes":p(o)))}},_clear:function(){this._componentElement&&(this.element.removeChild(this._componentElement),this._componentElement=null)}})},,,function(e,n){e.exports=t},,,,,,,,,,,,,,,function(t,e,n){"use strict";var o=n(3),r=o.Component;t.exports=r.extend("opal-route",{Static:{props:{path:String,component:String}}})},function(t,e){t.exports=function(t){var e=t.head||t.getElementsByTagName("head")[0];if(e){var n=t.createElement("style");return n.type="text/css",n.textContent=".opal-router{display:block}",e.appendChild(n),n}return null}(document)},function(t,e){"use strict";function n(t){return t.replace(o,"\\$1")}var o=/([?+|$(){}[^.\-\]\/\\*])/g;t.exports=n},function(t,e){"use strict";t.exports={NORMAL:0,OPTIONAL:1,INSERT:2}},function(t,e,n){"use strict";function o(t){function e(e,n){throw{name:"SyntaxError",message:e,at:n,path:t}}function n(n){return n&&n!=f&&e('Expected "'+n+'" instead of "'+f+'"',l),f=t[++l]}function o(){for(var t=[];f;)"("==f?t.push(u()):"["==f?t.push(s()):t.push(a());return t}function a(){for(var t=f;n()&&"("!=f&&"["!=f&&(c!=r.OPTIONAL||")"!=f);)t+=f;return{type:r.NORMAL,value:t}}function u(){var t=l;n("(");var o=p(),i=[],m=c;for(c=r.OPTIONAL;f;){if(")"==f)return n(),c=m,{type:r.OPTIONAL,name:o,childNodes:i};"("==f?i.push(u()):"["==f?i.push(s()):i.push(a())}e('Missing ")" in compound statement',t)}function p(){for(var o=l,r="";f;){if("?"==f)return i.test(r)||e('Invalid name "'+r+'"',o),n(),r;r+=f,n()}e('Invalid path "'+t+'"',0)}function s(){var t=l;n("[");var o="",a=c;for(c=r.INSERT;f;){if("]"==f)return i.test(o)||e('Invalid name "'+o+'"',t+1),n(),c=a,{type:r.INSERT,name:o};o+=f,n()}e('Missing "]" in compound statement',t)}var c=r.NORMAL,l=0,f=t[0];return o()}var r=n(21),i=/[a-z][0-9a-z]*/i;t.exports=o}])});
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("rionite")):"function"==typeof define&&define.amd?define(["rionite"],t):"object"==typeof exports?exports["opal-router"]=t(require("rionite")):e["opal-router"]=t(e.rionite)}(this,function(e){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}({0:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var u=e.length-1;u>=0;u--)(r=e[u])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(t,"__esModule",{value:!0}),n(63);var a=n(1),i=n(9),u=n(8),p=n(18),c=n(17),s=n(9);t.OpalRoute=s.default;var l=a.Utils.hyphenize,f=a.Utils.escapeHTML,d=Array.prototype.forEach,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._route=null,t._componentElement=null,t}return o(t,e),t.prototype.initialize=function(){this._routes=[]},t.prototype.ready=function(){var e=this._routes;d.call(this.element.querySelectorAll("opal-route"),function(t){var n=t.$c.props.path,o=[],r=[];!function e(t){for(var n=0,a=t;n<a.length;n++){var i=a[n];switch(i.type){case u.default.SIMPLE:o.push(c.default(i.value).replace("\\*",".*?"));break;case u.default.OPTIONAL:i.name?(o.push("("),r.push({name:i.name,optional:!0})):o.push("(?:"),e(i.childNodes),o.push(")?");break;case u.default.INSERT:o.push("([^\\/]+)"),r.push({name:i.name,optional:!1})}}}(p.default(n)),o=o.join(""),e.push({path:n,rePath:RegExp("^"+o+("/"==o.charAt(o.length-1)?"?":"/?")+"$"),properties:r,componentName:t.$c.props.component})})},t.prototype.elementAttached=function(){this._update(),this.listenTo(window,"popstate",this._onWindowPopState)},t.prototype.elementDetached=function(){this._clear()},t.prototype._onWindowPopState=function(){this._update()},t.prototype._update=function(){for(var e=location.hash.slice(1)||"/",t=this,n=0,o=this._routes;n<o.length;n++){var r=o[n],a=function(n){var o=e.match(n.rePath);if(!o)return"continue";var r=n.properties.reduce(function(e,t,n){if(t.optional)e[t.name]=!!o[n+1];else{var r=o[n+1];e[t.name]=r&&decodeURIComponent(r)}return e},Object.create(null));if(n===t._route){for(var a=t._componentElement,i=a.attributes,u=i.length;u;){var p=i.item(--u).name;"class"==p||p in r||a.removeAttribute(p)}t._applyState(r)}else{t._clear(),t._route=n;var a=t._componentElement=document.createElement(n.componentName);a.$c.ownerComponent=t,t._applyState(r),t.element.appendChild(a)}return{value:void 0}}(r);if("object"==typeof a)return a.value}this._clear()},t.prototype._applyState=function(e){var t=this._componentElement;for(var n in e){var o=e[n];t.setAttribute(l(n),""+(o===!1?"no":o===!0?"yes":f(o)))}},t.prototype._clear=function(){this._route&&(this._route=null,this.element.removeChild(this._componentElement),this._componentElement=null)},t}(a.Component);h.OpalRoute=i.default,h=r([a.d.Component({elementIs:"opal-router"})],h),t.default=h},1:function(t,n){t.exports=e},8:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n;!function(e){e[e.SIMPLE=0]="SIMPLE",e[e.OPTIONAL=1]="OPTIONAL",e[e.INSERT=2]="INSERT"}(n||(n={})),t.default=n},9:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var u=e.length-1;u>=0;u--)(r=e[u])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(a.Component);i=r([a.d.Component({elementIs:"opal-route",props:{path:{type:String,required:!0,readonly:!0},component:{type:String,required:!0,readonly:!0}}})],i),t.default=i},17:function(e,t){"use strict";function n(e){return e.replace(o,"\\$1")}Object.defineProperty(t,"__esModule",{value:!0});var o=/([?+|$(){}[^.\-\]\/\\*])/g;t.default=n},18:function(e,t,n){"use strict";function o(e){function t(t){if(t&&t!=s)throw{name:"SyntaxError",message:'Expected "'+t+'" instead of "'+s+'"',at:c,path:e};return s=e[++c]}function n(){for(var e=s;t()&&("("!=s&&"["!=s&&(p!=r.default.OPTIONAL||")"!=s));)e+=s;return{type:r.default.SIMPLE,value:e}}function o(){var a=c;t("(");var l;":"==s&&(l=i());var f=[],d=p;for(p=r.default.OPTIONAL;s;){if(")"==s)return t(),p=d,{type:r.default.OPTIONAL,name:l||null,childNodes:f};"("==s?f.push(o()):"["==s?f.push(u()):f.push(n())}throw{name:"SyntaxError",message:'Missing ")" in compound statement',at:a,path:e}}function i(){t(":");for(var n=c,o="";s;){if(":"==s){if(!a.test(o)||"class"==o)throw{name:"SyntaxError",message:'Invalid name "'+o+'"',at:n,path:e};return t(),o}o+=s,t()}throw{name:"SyntaxError",message:'Missing ":" in compound statement',at:n,path:e}}function u(){var n=c;t("[");var o="",i=p;for(p=r.default.INSERT;s;){if("]"==s){if(!a.test(o)||"class"==o)throw{name:"SyntaxError",message:'Invalid name "'+o+'"',at:n+1,path:e};return t(),p=i,{type:r.default.INSERT,name:o}}o+=s,t()}throw{name:"SyntaxError",message:'Missing "]" in compound statement',at:n,path:e}}var p=r.default.SIMPLE,c=0,s=e[0];return function(){for(var e=[];s;)"("==s?e.push(o()):"["==s?e.push(u()):e.push(n());return e}()}Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),a=/[a-z][0-9a-z]*/i;t.default=o},63:function(e,t){e.exports=function(e){var t=e.head||e.getElementsByTagName("head")[0];if(t){var n=e.createElement("style");return n.type="text/css",n.textContent=".opal-router{display:block}",t.appendChild(n),n}return null}(document)}})});
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("rionite")):"function"==typeof define&&define.amd?define(["rionite"],t):"object"==typeof exports?exports["opal-router"]=t(require("rionite")):e["opal-router"]=t(e.rionite)}(this,function(e){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}({0:function(e,t,n){"use strict";var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var u=e.length-1;u>=0;u--)(r=e[u])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};n(65);var a=n(1),i=n(7),u=n(6),p=n(18),s=n(17),c=n(7);t.OpalRoute=c.default;var l=a.Utils.hyphenize,f=a.Utils.escapeHTML,d=Array.prototype.forEach,h=function(e){function t(){var t=e.apply(this,arguments)||this;return t._route=null,t._componentElement=null,t}return o(t,e),t.prototype.initialize=function(){this._routes=[]},t.prototype.ready=function(){var e=this._routes;d.call(this.element.querySelectorAll("opal-route"),function(t){var n=t.$c.props.path,o=[],r=[];!function e(t){for(var n=0,a=t;n<a.length;n++){var i=a[n];switch(i.type){case u.default.SIMPLE:o.push(s.default(i.value).replace("\\*",".*?"));break;case u.default.OPTIONAL:o.push("("),r.push({name:i.name,optional:!0}),e(i.childNodes),o.push(")?");break;case u.default.INSERT:o.push("([^\\/]+)"),r.push({name:i.name,optional:!1})}}}(p.default(n)),o=o.join(""),e.push({path:n,rePath:RegExp("^"+o+("/"==o.charAt(o.length-1)?"?":"/?")+"$"),properties:r,componentName:t.$c.props.component})})},t.prototype.elementAttached=function(){this._update(),this.listenTo(window,"popstate",this._onWindowPopState)},t.prototype.elementDetached=function(){this._clear()},t.prototype._onWindowPopState=function(){this._update()},t.prototype._update=function(){for(var e=location.hash.slice(1)||"/",t=(function(t){var o=e.match(t.rePath);if(!o)return"continue";var r=t.properties.reduce(function(e,t,n){if(t.optional)e[t.name]=!!o[n+1];else{var r=o[n+1];e[t.name]=r&&decodeURIComponent(r)}return e},Object.create(null));if(t===n._route){for(var a=n._componentElement,i=a.attributes,u=i.length;u;){var p=i.item(--u).name;"class"==p||p in r||a.removeAttribute(p)}n._applyState(r)}else{n._clear(),n._route=t;var a=n._componentElement=document.createElement(t.componentName);a.$c.ownerComponent=n,n._applyState(r),n.element.appendChild(a)}return{value:void 0}}),n=this,o=0,r=this._routes;o<r.length;o++){var a=r[o],i=t(a);if("object"==typeof i)return i.value}this._clear()},t.prototype._applyState=function(e){var t=this._componentElement;for(var n in e){var o=e[n];t.setAttribute(l(n),""+(o===!1?"no":o===!0?"yes":f(o)))}},t.prototype._clear=function(){this._route&&(this._route=null,this.element.removeChild(this._componentElement),this._componentElement=null)},t}(a.Component);h.OpalRoute=i.default,h=r([a.d.Component({elementIs:"opal-router"})],h),Object.defineProperty(t,"__esModule",{value:!0}),t.default=h},1:function(t,n){t.exports=e},6:function(e,t){"use strict";var n;!function(e){e[e.SIMPLE=0]="SIMPLE",e[e.OPTIONAL=1]="OPTIONAL",e[e.INSERT=2]="INSERT"}(n||(n={})),Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},7:function(e,t,n){"use strict";var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var u=e.length-1;u>=0;u--)(r=e[u])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},a=n(1),i=function(e){function t(){return e.apply(this,arguments)||this}return o(t,e),t}(a.Component);i=r([a.d.Component({elementIs:"opal-route",props:{path:{type:String,required:!0,readonly:!0},component:{type:String,required:!0,readonly:!0}}})],i),Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},17:function(e,t){"use strict";function n(e){return e.replace(o,"\\$1")}var o=/([?+|$(){}[^.\-\]\/\\*])/g;Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},18:function(e,t,n){"use strict";function o(e){function t(t){if(t&&t!=l)throw{name:"SyntaxError",message:'Expected "'+t+'" instead of "'+l+'"',at:c,path:e};return l=e[++c]}function n(){for(var e=[];l;)"("==l?e.push(i()):"["==l?e.push(p()):e.push(o());return e}function o(){for(var e=l;t()&&"("!=l&&"["!=l&&(s!=r.default.OPTIONAL||")"!=l);)e+=l;return{type:r.default.SIMPLE,value:e}}function i(){var n=c;t("(");var a=u(),f=[],d=s;for(s=r.default.OPTIONAL;l;){if(")"==l)return t(),s=d,{type:r.default.OPTIONAL,name:a,childNodes:f};"("==l?f.push(i()):"["==l?f.push(p()):f.push(o())}throw{name:"SyntaxError",message:'Missing ")" in compound statement',at:n,path:e}}function u(){for(var n=c,o="";l;){if("?"==l){if(!a.test(o)||"class"==o)throw{name:"SyntaxError",message:'Invalid name "'+o+'"',at:n,path:e};return t(),o}o+=l,t()}throw{name:"SyntaxError",message:'Missing "?" in compound statement',at:n,path:e}}function p(){var n=c;t("[");var o="",i=s;for(s=r.default.INSERT;l;){if("]"==l){if(!a.test(o)||"class"==o)throw{name:"SyntaxError",message:'Invalid name "'+o+'"',at:n+1,path:e};return t(),s=i,{type:r.default.INSERT,name:o}}o+=l,t()}throw{name:"SyntaxError",message:'Missing "]" in compound statement',at:n,path:e}}var s=r.default.SIMPLE,c=0,l=e[0];return n()}var r=n(6),a=/[a-z][0-9a-z]*/i;Object.defineProperty(t,"__esModule",{value:!0}),t.default=o},65:function(e,t){e.exports=function(e){var t=e.head||e.getElementsByTagName("head")[0];if(t){var n=e.createElement("style");return n.type="text/css",n.textContent=".opal-router{display:block}",t.appendChild(n),n}return null}(document)}})});
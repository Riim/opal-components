!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("rionite")):"function"==typeof define&&define.amd?define(["rionite"],t):"object"==typeof exports?exports["opal-router"]=t(require("rionite")):e["opal-router"]=t(e.rionite)}(this,function(e){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}({0:function(e,t,n){"use strict";n(65);var o=n(1),r=o.Component,a=o.Utils,i=a.hyphenize,u=a.escapeHTML,p=n(19),s=n(18),c=n(9),l=n(20),h=Array.prototype.forEach;e.exports=r.extend("opal-router",{Static:{OpalRoute:p},_route:null,_componentElement:null,initialize:function(){this._routes=[]},ready:function(){var e=this._routes;h.call(this.element.querySelectorAll("opal-route"),function(t){var n=t.$c.props.path,o=l(n),r=[],a=[];!function e(t){for(var n=0,o=t.length;n<o;n++){var i=t[n];switch(i.type){case c.NORMAL:r.push(s(i.value).replace("\\*",".*?"));break;case c.OPTIONAL:r.push("("),a.push({name:i.name,optional:!0}),e(i.childNodes),r.push(")?");break;case c.INSERT:r.push("([^\\/]+)"),a.push({name:i.name,optional:!1})}}}(o),r=r.join(""),r+="/"==r.charAt(r.length-1)?"?":"/?",e.push({path:n,rePath:RegExp("^"+r+"$"),properties:a,componentName:t.$c.props.component})})},elementAttached:function(){this._update(),this.listenTo(window,"popstate",this._onWindowPopState)},elementDetached:function(){this._route&&(this._route=null,this._clear())},_onWindowPopState:function(){this._update()},_update:function(){for(var e=this,t=this._routes,n=location.hash.slice(1)||"/",o=(function(o,r){var a=t[o],i=n.match(a.rePath);if(i){var u=a.properties.reduce(function(e,t,n){if(t.optional)e[t.name]=!!i[n+1];else{var o=i[n+1];e[t.name]=o&&decodeURIComponent(o)}return e},Object.create(null));if(a===e._route){for(var p=e._componentElement,s=p.attributes,c=s.length;c;){var l=s.item(--c),h=l.name;"class"==h||h in u||p.removeAttribute(h)}e._applyState(u)}else{e._clear(),e._route=a;var f=e._componentElement=document.createElement(a.componentName);f.$c.ownerComponent=e,e._applyState(u),e.element.appendChild(f)}return{v:void 0}}}),r=0,a=t.length;r<a;r++){var i=o(r,a);if("object"==typeof i)return i.v}this._route&&(this._route=null,this._clear())},_applyState:function(e){var t=this._componentElement;for(var n in e){var o=e[n];t.setAttribute(i(n),""+(o===!1?"no":o===!0?"yes":u(o)))}},_clear:function(){this._componentElement&&(this.element.removeChild(this._componentElement),this._componentElement=null)}})},1:function(t,n){t.exports=e},9:function(e,t){"use strict";e.exports={NORMAL:0,OPTIONAL:1,INSERT:2}},18:function(e,t){"use strict";var n=/([?+|$(){}[^.\-\]\/\\*])/g;e.exports=function(e){return e.replace(n,"\\$1")}},19:function(e,t,n){"use strict";var o=n(1),r=o.Component;e.exports=r.extend("opal-route",{Static:{props:{path:{type:String,required:!0,readonly:!0},component:{type:String,required:!0,readonly:!0}}}})},20:function(e,t,n){"use strict";function o(e){function t(t,n){throw{name:"SyntaxError",message:t,at:n,path:e}}function n(n){return n&&n!=h&&t('Expected "'+n+'" instead of "'+h+'"',l),h=e[++l]}function o(){for(var e=[];h;)"("==h?e.push(u()):"["==h?e.push(s()):e.push(i());return e}function i(){for(var e=h;n()&&"("!=h&&"["!=h&&(c!=r.OPTIONAL||")"!=h);)e+=h;return{type:r.NORMAL,value:e}}function u(){var e=l;n("(");var o=p(),a=[],f=c;for(c=r.OPTIONAL;h;){if(")"==h)return n(),c=f,{type:r.OPTIONAL,name:o,childNodes:a};"("==h?a.push(u()):"["==h?a.push(s()):a.push(i())}t('Missing ")" in compound statement',e)}function p(){for(var o=l,r="";h;){if("?"==h)return a.test(r)&&"class"!=r||t('Invalid name "'+r+'"',o),n(),r;r+=h,n()}t('Invalid path "'+e+'"',0)}function s(){var e=l;n("[");var o="",i=c;for(c=r.INSERT;h;){if("]"==h)return a.test(o)&&"class"!=o||t('Invalid name "'+o+'"',e+1),n(),c=i,{type:r.INSERT,name:o};o+=h,n()}t('Missing "]" in compound statement',e)}var c=r.NORMAL,l=0,h=e[0];return o()}var r=n(9),a=/[a-z][0-9a-z]*/i;e.exports=o},65:function(e,t){e.exports=function(e){var t=e.head||e.getElementsByTagName("head")[0];if(t){var n=e.createElement("style");return n.type="text/css",n.textContent=".opal-router{display:block}",t.appendChild(n),n}return null}(document)}})});
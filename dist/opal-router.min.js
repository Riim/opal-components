!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("rionite")):"function"==typeof define&&define.amd?define(["rionite"],t):"object"==typeof exports?exports["opal-router"]=t(require("rionite")):e["opal-router"]=t(e.rionite)}(this,function(e){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}({0:function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};n(64);var r=n(1),i=r.Component,a=r.Utils,u=a.hyphenize,p=a.escapeHTML,s=n(14),c=n(13),l=n(4),f=n(15),m=Object.create,h=Array.prototype.forEach;e.exports=i.extend("opal-router",{Static:{OpalRoute:s},_route:null,_componentElement:null,initialize:function(){this._routes=[]},ready:function(){var e=this._routes;h.call(this.element.querySelectorAll("opal-route"),function(t){var n=t.$c.props.path,o=f(n),r=[],i=[];!function e(t){for(var n=0,o=t.length;n<o;n++){var a=t[n];switch(a.type){case l.NORMAL:r.push(c(a.value).replace("\\*",".*?"));break;case l.OPTIONAL:r.push("("),i.push({name:a.name,optional:!0}),e(a.childNodes),r.push(")?");break;case l.INSERT:r.push("([^\\/]+)"),i.push({name:a.name,optional:!1})}}}(o),r=r.join(""),r+="/"==r.charAt(r.length-1)?"?":"/?",e.push({path:n,rePath:RegExp("^"+r+"$"),properties:i,componentName:t.$c.props.component})})},elementAttached:function(){this._update(),this.listenTo(window,"popstate",this._onWindowPopState)},elementDetached:function(){this._route&&(this._route=null,this._clear())},_onWindowPopState:function(){this._update()},_update:function(){for(var e=this,t=this._routes,n=location.hash.slice(1)||"/",r=(function(o,r){var i=t[o],a=n.match(i.rePath);if(a){var u=i.properties.reduce(function(e,t,n){return e[t.name]=t.optional?!!a[n+1]:a[n+1],e},m(null));if(i===e._route){for(var p=e._componentElement,s=p.attributes,c=s.length;c;){var l=s.item(--c);l.name in u||p.removeAttribute(l.name)}e._applyState(u)}else{e._clear(),e._route=i;var f=e._componentElement=document.createElement(i.componentName);f.$c.ownerComponent=e,e._applyState(u),e.element.appendChild(f)}return{v:void 0}}}),i=0,a=t.length;i<a;i++){var u=r(i,a);if("object"===("undefined"==typeof u?"undefined":o(u)))return u.v}this._route&&(this._route=null,this._clear())},_applyState:function(e){var t=this._componentElement;for(var n in e){var o=e[n];t.setAttribute(u(n),""+(o===!1?"no":o===!0?"yes":p(o)))}},_clear:function(){this._componentElement&&(this.element.removeChild(this._componentElement),this._componentElement=null)}})},1:function(t,n){t.exports=e},4:function(e,t){"use strict";e.exports={NORMAL:0,OPTIONAL:1,INSERT:2}},13:function(e,t){"use strict";function n(e){return e.replace(o,"\\$1")}var o=/([?+|$(){}[^.\-\]\/\\*])/g;e.exports=n},14:function(e,t,n){"use strict";var o=n(1),r=o.Component;e.exports=r.extend("opal-route",{Static:{props:{path:{type:String,required:!0,readonly:!0},component:{type:String,required:!0,readonly:!0}}}})},15:function(e,t,n){"use strict";function o(e){function t(t,n){throw{name:"SyntaxError",message:t,at:n,path:e}}function n(n){return n&&n!=f&&t('Expected "'+n+'" instead of "'+f+'"',l),f=e[++l]}function o(){for(var e=[];f;)"("==f?e.push(u()):"["==f?e.push(s()):e.push(a());return e}function a(){for(var e=f;n()&&"("!=f&&"["!=f&&(c!=r.OPTIONAL||")"!=f);)e+=f;return{type:r.NORMAL,value:e}}function u(){var e=l;n("(");var o=p(),i=[],m=c;for(c=r.OPTIONAL;f;){if(")"==f)return n(),c=m,{type:r.OPTIONAL,name:o,childNodes:i};"("==f?i.push(u()):"["==f?i.push(s()):i.push(a())}t('Missing ")" in compound statement',e)}function p(){for(var o=l,r="";f;){if("?"==f)return i.test(r)||t('Invalid name "'+r+'"',o),n(),r;r+=f,n()}t('Invalid path "'+e+'"',0)}function s(){var e=l;n("[");var o="",a=c;for(c=r.INSERT;f;){if("]"==f)return i.test(o)||t('Invalid name "'+o+'"',e+1),n(),c=a,{type:r.INSERT,name:o};o+=f,n()}t('Missing "]" in compound statement',e)}var c=r.NORMAL,l=0,f=e[0];return o()}var r=n(4),i=/[a-z][0-9a-z]*/i;e.exports=o},64:function(e,t){e.exports=function(e){var t=e.head||e.getElementsByTagName("head")[0];if(t){var n=e.createElement("style");return n.type="text/css",n.textContent=".opal-router{display:block}",t.appendChild(n),n}return null}(document)}})});
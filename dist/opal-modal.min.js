!function(o,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("rionite")):"function"==typeof define&&define.amd?define(["rionite"],e):"object"==typeof exports?exports["opal-modal"]=e(require("rionite")):o["opal-modal"]=e(o.rionite)}(this,function(o){return function(o){function e(n){if(t[n])return t[n].exports;var l=t[n]={exports:{},id:n,loaded:!1};return o[n].call(l.exports,l,l.exports,e),l.loaded=!0,l.exports}var t={};return e.m=o,e.c=t,e.p="",e(0)}({0:function(o,e,t){"use strict";function n(){s[0].element.contains(document.activeElement.parentNode)||s[0].$("btn-close").focus()}function l(o){27==o.keyCode&&(o.preventDefault(),s[0].close())}var a=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,e){o.__proto__=e}||function(o,e){for(var t in e)e.hasOwnProperty(t)&&(o[t]=e[t])};return function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),r=this&&this.__decorate||function(o,e,t,n){var l,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(o,e,t,n);else for(var p=o.length-1;p>=0;p--)(l=o[p])&&(r=(a<3?l(r):a>3?l(e,t,r):l(e,t))||r);return a>3&&r&&Object.defineProperty(e,t,r),r};Object.defineProperty(e,"__esModule",{value:!0}),t(58);var p,i=t(1),d=t(30),s=[],c=function(o){function e(){return null!==o&&o.apply(this,arguments)||this}return a(e,o),e.prototype.ready=function(){this.props.opened&&this._open()},e.prototype.elementDetached=function(){this.close()},e.prototype.propertyChanged=function(o,e){"opened"==o&&this[e?"_open":"_close"]()},e.prototype.open=function(){return!this.props.opened&&(this.props.opened=!0,!0)},e.prototype.close=function(){return!!this.props.opened&&(this.props.opened=!1,!0)},e.prototype.toggle=function(o){return this.props.opened=void 0===o?!this.props.opened:o},e.prototype._open=function(){if(s.length)s[0].element.classList.add("_overlapped");else{p=this.listenTo(document,{focusin:n,keyup:l});var o=document.body,e=o.offsetWidth;o.style.overflow="hidden",e<o.offsetWidth&&(o.style.marginRight=o.offsetWidth-e+"px")}this.props.opened=!0,s.unshift(this),this.focus()},e.prototype._close=function(){var o=s.indexOf(this);if(o&&s[o-1].close(),this.props.opened=!1,s.shift(),s.length)s[0].element.classList.remove("_overlapped"),s[0].focus();else{p.stop();var e=document.body.style;e.overflow="",e.marginRight=""}},e.prototype.focus=function(){return this==s[0]&&(document.body.classList.remove("_no-focus-highlight"),(this.$("focus")||this.$("btn-close")).focus()),this},e}(i.Component);c=r([i.d.Component({elementIs:"opal-modal",props:{opened:!1},bemlTemplate:d,events:{":element":{click:function(o){for(var e=this.element,t=this.$("window"),n=o.target;n!=t;){if(n==e){this.close();break}if(!(n=n.parentNode))break}}},"btn-close":{click:function(){this.props.opened=!1,this.emit("close")}}}})],c),e.default=c},1:function(e,t){e.exports=o},30:function(o,e){o.exports="div/window {\nspan/btn-close-wrapper {\nbutton/btn-close\n}\nrt-content/content (cloning=no)\n}"},58:function(o,e){o.exports=function(o){var e=o.head||o.getElementsByTagName("head")[0];if(e){var t=o.createElement("style");return t.type="text/css",t.textContent=".opal-modal{position:fixed;top:0;left:0;z-index:1000;display:none;overflow:auto;box-sizing:border-box;padding:20px 65px;width:100%;height:100%;background:rgba(0,0,0,.6);text-align:center;white-space:nowrap;cursor:default}.opal-modal::before{display:inline-block;width:0;height:100%;content:'';vertical-align:middle}.opal-modal .opal-modal__window{display:inline-block;padding:30px;border-radius:3px;background:#fff;box-shadow:0 0 20px rgba(0,0,0,.3);vertical-align:middle;text-align:left;white-space:normal}.opal-modal .opal-modal__btn-close-wrapper{position:absolute;top:10px;right:10px;width:45px}.opal-modal .opal-modal__btn-close{position:fixed;top:10px;box-sizing:content-box;padding:10px;width:25px;height:25px;border:0;background:0 0;cursor:pointer}.opal-modal .opal-modal__btn-close::before,.opal-modal .opal-modal__btn-close::after{position:absolute;top:21px;left:10px;width:25px;height:3px;border-radius:2px;background:#e6e6e6;content:'';transition:background .1s linear;-ms-transform:rotate(45deg);transform:rotate(45deg)}.opal-modal .opal-modal__btn-close::after{-ms-transform:rotate(-45deg);transform:rotate(-45deg)}.opal-modal .opal-modal__window:hover .opal-modal__btn-close::before,.opal-modal .opal-modal__window:hover .opal-modal__btn-close::after{background:#ccc}.opal-modal .opal-modal__btn-close:hover::before,.opal-modal .opal-modal__btn-close:hover::after,.opal-modal .opal-modal__window:hover .opal-modal__btn-close:hover::before,.opal-modal .opal-modal__window:hover .opal-modal__btn-close:hover::after{background:#fff}.opal-modal .opal-modal__btn-close:active::before,.opal-modal .opal-modal__btn-close:active::after,.opal-modal .opal-modal__window:hover .opal-modal__btn-close:active::before,.opal-modal .opal-modal__window:hover .opal-modal__btn-close:active::after{background:#b3b3b3}.opal-modal .opal-modal__content{position:relative;display:block}.opal-modal[opened]{display:block}.opal-modal._overlapped{left:100%;overflow:visible}",e.appendChild(t),t}return null}(document)}})});
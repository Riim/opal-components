!function(o,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("rionite")):"function"==typeof define&&define.amd?define(["rionite"],e):"object"==typeof exports?exports["opal-modal"]=e(require("rionite")):o["opal-modal"]=e(o.rionite)}(this,function(o){return function(o){function e(n){if(t[n])return t[n].exports;var l=t[n]={exports:{},id:n,loaded:!1};return o[n].call(l.exports,l,l.exports,e),l.loaded=!0,l.exports}var t={};return e.m=o,e.c=t,e.p="",e(0)}({0:function(o,e,t){"use strict";function n(){var o=document.body;if(document.activeElement!=o)for(var e=i[0].element,t=document.activeElement.parentNode;t!=e;t=t.parentNode)if(t==o){i[0].assets.btnClose.focus();break}}function l(o){27==o.keyCode&&(o.preventDefault(),i[0].close())}t(60);var a=t(1),p=a.ComponentTemplate,d=a.Component,i=[],r=void 0;o.exports=d.extend("opal-modal",{Static:{props:{opened:!1},template:new p(t(32)),assets:{":element":{"on-click":function(o){o.target==this.element&&(this.props.opened=!1)}},btnClose:{"on-click":function(){this.props.opened=!1}}}},ready:function(){this.props.opened&&this._open()},elementDetached:function(){this.close()},elementAttributeChanged:function(o,e,t){"opened"==o&&this[t?"_open":"_close"]()},open:function(){return!this.props.opened&&(this.props.opened=!0,!0)},close:function(){return!!this.props.opened&&(this.props.opened=!1,!0)},toggle:function(o){return this.props.opened=void 0===o?!this.props.opened:o},_open:function(){if(i.length)i[0].element.classList.add("_overlapped");else{r=this.listenTo(document,{focusin:n,keyup:l});var o=document.body,e=o.offsetWidth;o.style.overflow="hidden",e<o.offsetWidth&&(o.style.marginRight=o.offsetWidth-e+"px")}this.props.opened=!0,i.unshift(this),this.assets.btnClose.focus(),this.emit("open")},_close:function(){var o=i.indexOf(this);if(o&&i[o-1].close(),this.props.opened=!1,i.shift(),i.length)i[0].element.classList.remove("_overlapped"),i[0].assets.btnClose.focus();else{r.stop();var e=document.body.style;e.overflow="",e.marginRight=""}this.emit("close")}})},1:function(e,t){e.exports=o},32:function(o,e){o.exports='{{block window }} <div class="opal-modal__window"> {{block btn_close }} <rt-content select=".opal-modal__btn-close"> <span class="opal-modal__btn-close-wrapper"> <button class="opal-modal__btn-close"></button> </span> </rt-content> {{/block}} {{block content }} <rt-content class="opal-modal__content">{{block content_inner }}{{/block}}</rt-content> {{/block}} </div> {{/block}}'},60:function(o,e){o.exports=function(o){var e=o.head||o.getElementsByTagName("head")[0];if(e){var t=o.createElement("style");return t.type="text/css",t.textContent=".opal-modal{position:fixed;top:0;left:0;z-index:1000;display:none;overflow:auto;box-sizing:border-box;padding:20px 65px;width:100%;height:100%;background:rgba(0,0,0,.6);text-align:center;white-space:nowrap;cursor:default}.opal-modal::before{display:inline-block;width:0;height:100%;content:'';vertical-align:middle}.opal-modal .opal-modal__window{display:inline-block;padding:30px;border-radius:3px;background:#fff;box-shadow:0 0 20px rgba(0,0,0,.3);vertical-align:middle;text-align:left;white-space:normal}.opal-modal .opal-modal__btn-close-wrapper{position:absolute;top:10px;right:10px;width:45px}.opal-modal .opal-modal__btn-close{position:fixed;top:10px;box-sizing:content-box;padding:10px;width:25px;height:25px;border:0;background:0 0;cursor:pointer}.opal-modal .opal-modal__btn-close::before,.opal-modal .opal-modal__btn-close::after{position:absolute;top:21px;left:10px;width:25px;height:3px;border-radius:2px;background:#e6e6e6;content:'';transition:background .1s;-ms-transform:rotate(45deg);transform:rotate(45deg)}.opal-modal .opal-modal__btn-close::after{-ms-transform:rotate(-45deg);transform:rotate(-45deg)}.opal-modal .opal-modal__window:hover .opal-modal__btn-close::before,.opal-modal .opal-modal__window:hover .opal-modal__btn-close::after{background:#ccc}.opal-modal .opal-modal__btn-close:hover::before,.opal-modal .opal-modal__btn-close:hover::after,.opal-modal .opal-modal__window:hover .opal-modal__btn-close:hover::before,.opal-modal .opal-modal__window:hover .opal-modal__btn-close:hover::after{background:#fff}.opal-modal .opal-modal__btn-close:active::before,.opal-modal .opal-modal__btn-close:active::after,.opal-modal .opal-modal__window:hover .opal-modal__btn-close:active::before,.opal-modal .opal-modal__window:hover .opal-modal__btn-close:active::after{background:#b3b3b3}.opal-modal .opal-modal__content{position:relative;display:block}.opal-modal[opened]{display:block}.opal-modal._overlapped{left:100%;overflow:visible}",e.appendChild(t),t}return null}(document)}})});
!function(o,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("rionite"),require("cellx"),require("cellx-indexed-collections")):"function"==typeof define&&define.amd?define(["rionite","cellx","cellx-indexed-collections"],t):"object"==typeof exports?exports["opal-multirow"]=t(require("rionite"),require("cellx"),require("cellx-indexed-collections")):o["opal-multirow"]=t(o.rionite,o.cellx,o["cellx-indexed-collections"])}(this,function(o,t,e){return function(o){function t(r){if(e[r])return e[r].exports;var n=e[r]={exports:{},id:r,loaded:!1};return o[r].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var e={};return t.m=o,t.c=e,t.p="",t(0)}({0:function(o,t,e){"use strict";e(61);var r=e(2),n=r.Utils.nextUID,l=r.cellx,i=e(3),s=i.IndexedList,w=e(1),a=w.ComponentTemplate,p=w.Component,c=e(11);o.exports=p.extend("opal-multirow",{Static:{OpalMultirowRow:c,template:new a(e(33)),assets:{":component":{"on-remove-row-click":function(o){var t=this,e=o.target;e.props.preset?(this.assets.presetRows.element.removeChild(e.element),this._presetRowCount--):this._newRows.remove(this._newRows.get(e.parentComponent.element.dataset.key,"key")),setTimeout(function(){t.emit("remove-row"),t.emit("change")},1)},"on-add-row-click":function(){var o=this;this._newRows.add({key:n()}),setTimeout(function(){o.emit("add-row"),o.emit("change")},1)}},presetRows:{}}},initialize:function(){l.define(this,{_presetRowCount:0,_newRows:new s(null,{indexes:["key"]}),_noPresetRows:function(){return!this._presetRowCount},_noNewRows:function(){return!this._newRows.length},_notLastRow:function(){return this._presetRowCount+this._newRows.length!=1}})},ready:function(){var o=this._presetRowCount=this.$$(".opal-multirow-row").filter(function(o){return o.props.preset}).length;o||this._newRows.add({key:n()})}})},1:function(t,e){t.exports=o},2:function(o,e){o.exports=t},3:function(o,t){o.exports=e},11:function(o,t,e){"use strict";e(62);var r=e(1),n=r.ComponentTemplate,l=r.Component;o.exports=l.extend("opal-multirow-row",{Static:{props:{preset:{default:!1,readonly:!0}},template:new n(e(34)),assets:{btnRemoveRow:{"on-click":function(){this.emit("remove-row-click")}},btnAddRow:{"on-click":function(){this.emit("add-row-click")}}}}})},33:function(o,t){o.exports='{{block preset_rows }} <rt-content class="opal-multirow__preset-rows" select="opal-multirow-row[preset]" no-new-rows="{_noNewRows}" not-last-row="{_notLastRow}"></rt-content> {{/block}} <div class="opal-multirow__new-rows" no-preset-rows="{_noPresetRows}" not-last-row="{_notLastRow}"> <template is="rt-repeat" for="row of _newRows" track-by="key" rt-silent=""> {{block row }} <rt-content select="opal-multirow-row:not([preset])" data-key="{row.key}"></rt-content> {{/block}} </template> </div>'},34:function(o,t){o.exports='<rt-content class="opal-multirow-row__content"></rt-content> {{block buttons }} <opal-sign-button class="opal-multirow-row__btn-remove-row" sign="minus"></opal-sign-button> <opal-sign-button class="opal-multirow-row__btn-add-row" sign="plus"></opal-sign-button> {{/block}}'},61:function(o,t){o.exports=function(o){var t=o.head||o.getElementsByTagName("head")[0];if(t){var e=o.createElement("style");return e.type="text/css",e.textContent=".opal-multirow{display:block}",t.appendChild(e),e}return null}(document)},62:function(o,t){o.exports=function(o){var t=o.head||o.getElementsByTagName("head")[0];if(t){var e=o.createElement("style");return e.type="text/css",e.textContent=".opal-multirow-row{display:block;white-space:nowrap}.opal-multirow-row::after{display:table;clear:both;content:''}.opal-multirow-row .opal-multirow-row__content{display:inline-block;margin-bottom:19px;padding-right:6px}.opal-multirow-row .opal-multirow-row__btn-remove-row,.opal-multirow-row .opal-multirow-row__btn-add-row{position:relative;top:1px;display:none}.opal-multirow__preset-rows[no-new-rows] .opal-multirow-row:last-child .opal-multirow-row__content,.opal-multirow__new-rows rt-content:last-child .opal-multirow-row .opal-multirow-row__content{margin-bottom:0}.opal-multirow__preset-rows[not-last-row] .opal-multirow-row .opal-multirow-row__btn-remove-row,.opal-multirow__new-rows[not-last-row] .opal-multirow-row .opal-multirow-row__btn-remove-row,.opal-multirow__preset-rows[no-new-rows] .opal-multirow-row:last-child .opal-multirow-row__btn-add-row,.opal-multirow__new-rows rt-content:last-child .opal-multirow-row .opal-multirow-row__btn-add-row{display:inline-block}.opal-multirow-row .opal-popover{white-space:normal}",t.appendChild(e),e}return null}(document)}})});
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("cellx"),require("rionite")):"function"==typeof define&&define.amd?define(["cellx","rionite"],t):"object"==typeof exports?exports["opal-calendar"]=t(require("cellx"),require("rionite")):e["opal-calendar"]=t(e.cellx,e.rionite)}(this,function(e,t){return function(e){function t(o){if(a[o])return a[o].exports;var n=a[o]={exports:{},id:o,loaded:!1};return e[o].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){"use strict";a(5),a(6);var o=a(2),n=a(3),r=n.Component,l=n.template,s=a(7),c=a(8);e.exports=r.extend("opal-calendar",{Static:{props:{fromDate:String,toDate:String,selectedDate:String},i18n:{previousMonth:"Предыдущий месяц",nextMonth:"Следующий месяц",months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],weekDays:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],weekDaysShort:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],sundayFirst:!1},template:l(a(9)),assets:{btnPrevMonth:{"on-click":function(){this.shownMonth?this.shownMonth--:(this.shownYear--,this.shownMonth=11)}},btnNextMonth:{"on-click":function(){11==this.shownMonth?(this.shownYear++,this.shownMonth=0):this.shownMonth++}},sMonth:{"on-select":function(e){this.shownMonth=+e.target.value}},sYear:{"on-select":function(e){this.shownYear=+e.target.value}},days:{"on-focusin":function(){document.activeElement.dataset.date&&!this._documentKeyDownListening&&(this._documentKeyDownListening=this.listenTo(document,"keydown",this._onDocumentKeyDown))},"on-focusout":function(){var e=this;setTimeout(function(){document.activeElement.classList.contains("opal-calendar__day")||(e._documentKeyDownListening.stop(),e._documentKeyDownListening=null)},1)}}}},initialize:function(){var e=this.constructor.i18n,t=e.sundayFirst;this.weekDays=t?e.weekDays:e.weekDays.slice(1).concat(e.weekDays[0]),this.weekDaysShort=t?e.weekDaysShort:e.weekDaysShort.slice(1).concat(e.weekDaysShort[0]),o.define(this,{fromDate:function e(){var e=this.props.fromDate;return e?s(e):(e=new Date,new Date(e.getFullYear()-100,e.getMonth(),e.getDate()))},toDate:function e(){var e=this.props.toDate;return e?s(e):(e=new Date,new Date(e.getFullYear(),e.getMonth(),e.getDate()))},fromYear:function(){return this.fromDate.getFullYear()},toYear:function(){return this.toDate.getFullYear()},years:function e(){for(var e=[],t=this.fromYear,a=this.toYear;t<=a;t++)e.push(t);return e}});var a=this.fromDate,n=this.toDate;if(a>n)throw new TypeError("fromDate must be less than or equal to toDate");var r=this.props.selectedDate,l=void 0;if(r){if(l=s(r),l<a||l>n)throw new RangeError("shownDate must be "+(l<a?"greater":"less")+" than or equal to "+(l<a?"fromDate":"toDate"))}else l=n;o.define(this,{shownYear:l.getFullYear(),shownMonth:l.getMonth(),btnPrevMonthDisabled:function(){return this.shownYear==this.fromYear&&!this.shownMonth},btnNextMonthDisabled:function(){return this.shownYear==this.toYear&&11==this.shownMonth},selectedDate:function e(){var e=this.props.selectedDate;return e?s(e):null},days:function e(a,o,n){function r(e,t,a,o){var n=new Date(e,t,a),r=n<l||n>s;D.push({date:c(e,t,a),value:a,notInCurrentMonth:o,today:e==u&&t==f&&a==_,selected:!!p&&e==w&&t==x&&a==g,disabled:r,tabIndex:r?null:0})}var l=this.fromDate,s=this.toDate,i=this.shownYear,d=this.shownMonth,p=this.selectedDate;if(this._currentlyDateSelect)return this._currentlyDateSelect=!1,n;var h=new Date,u=h.getFullYear(),f=h.getMonth(),_=h.getDate(),y=new Date(i,d,0).getDate(),b=new Date(i,d+1,0).getDate(),m=new Date(i,d,1).getDay();t||(m=(m||7)-1);var w=void 0,x=void 0,g=void 0;p&&(w=p.getFullYear(),x=p.getMonth(),g=p.getDate());for(var v=m,D=[],e=[D];v;)r(i-!d,d?d-1:11,y- --v,!0);for(var k=0;k<b;)r(i,d,++k,!1),!((k+m)%7)&&k<b&&e.push(D=[]);for(var M=1,Y=8-D.length;M<Y;M++)r(i+(11==d),11==d?0:d+1,M,!0);return e}})},_onDocumentKeyDown:function(e){13!=e.which&&32!=e.which||(e.preventDefault(),this._click(document.activeElement))},_onDayClick:function(e){this._click(e.target)},_click:function(e){if(!e.hasAttribute("selected")&&!e.hasAttribute("disabled")){var t=this.assets.days.querySelector("[selected]");t&&t.removeAttribute("selected"),e.setAttribute("selected",""),this._currentlyDateSelect=!0,this.props.selectedDate=e.dataset.date}}})},,function(t,a){t.exports=e},function(e,a){e.exports=t},,function(e,t){e.exports=function(e){var t=e.head||e.getElementsByTagName("head")[0];if(t){var a=e.createElement("style");return a.type="text/css",a.textContent=".opal-calendar{display:block;width:300px;border:1px solid #dbdbdb;border-radius:3px;background:#fff;color:#000;text-shadow:none;font:16px/24px Verdana,Geneva,sans-serif;font-weight:400}.opal-calendar .opal-calendar__header{position:relative;padding:8px 44px;text-align:center}.opal-calendar .opal-calendar__btn-prev-month,.opal-calendar .opal-calendar__btn-next-month{position:absolute;top:0;bottom:0;margin:auto;padding:0;width:30px;height:30px;border:0;border-radius:50%;background:0 0;cursor:pointer}.opal-calendar .opal-calendar__btn-prev-month{left:8px}.opal-calendar .opal-calendar__btn-next-month{right:8px}.opal-calendar .opal-calendar__btn-prev-month:hover,.opal-calendar .opal-calendar__btn-next-month:hover{background:#e6e6e6}.opal-calendar .opal-calendar__btn-prev-month:focus,.opal-calendar .opal-calendar__btn-next-month:focus{outline:none}body:not(._no-focus-highlight) .opal-calendar .opal-calendar__btn-prev-month:focus::after,body:not(._no-focus-highlight) .opal-calendar .opal-calendar__btn-next-month:focus::after{position:absolute;top:2px;right:2px;bottom:2px;left:2px;border-radius:inherit;box-shadow:inset 0 0 0 1px #33a0ff;content:'';pointer-events:none}.opal-calendar .opal-calendar__btn-prev-month:active,.opal-calendar .opal-calendar__btn-next-month:active{background:#ccc}.opal-calendar .opal-calendar__btn-prev-month[disabled],.opal-calendar .opal-calendar__btn-next-month[disabled]{background:0 0;color:#000;opacity:.3;cursor:default}.opal-calendar .opal-calendar__icon-arrow-left,.opal-calendar .opal-calendar__icon-arrow-right{display:block;margin:auto;width:16px;height:16px;fill:currentColor}.opal-calendar .opal-calendar__icon-arrow-right{-webkit-transform:scaleX(-1);-ms-transform:scaleX(-1);transform:scaleX(-1)}.opal-calendar .opal-calendar__body{padding:0 8px 8px;text-align:center;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.opal-calendar .opal-calendar__week-days,.opal-calendar .opal-calendar__days{width:100%;border-spacing:0;border-collapse:separate}.opal-calendar .opal-calendar__week-day,.opal-calendar .opal-calendar__day{padding:3px 7px;width:14.286%;border:1px solid transparent}.opal-calendar .opal-calendar__day{position:relative;border-radius:3px;cursor:pointer}.opal-calendar .opal-calendar__day:hover{background:#e6e6e6}.opal-calendar .opal-calendar__day:focus{outline:none}body:not(._no-focus-highlight) .opal-calendar .opal-calendar__day:focus::after{position:absolute;top:2px;right:2px;bottom:2px;left:2px;border-radius:inherit;box-shadow:inset 0 0 0 1px #33a0ff;content:'';pointer-events:none}.opal-calendar .opal-calendar__day:active{background:#ccc}.opal-calendar .opal-calendar__day[not-in-current-month]{color:#a6a6a6}.opal-calendar .opal-calendar__day[today]{text-decoration:underline}.opal-calendar .opal-calendar__day[selected]{color:#0d87f2}.opal-calendar .opal-calendar__day[disabled]{background:0 0;color:#e6e6e6;cursor:default}",t.appendChild(a),a}return null}(document)},function(e,t){!function e(){document.body?document.body.insertAdjacentHTML("beforeend",'<svg xmlns="http://www.w3.org/2000/svg" style="display:none"><symbol viewBox="0 0 32 28" id="opal-calendar__icon-arrow-left"><path stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3" fill="none" d="M14 2L2 14l12 12M2 14h28"/></symbol></svg>'):setTimeout(e,100)}()},function(e,t){"use strict";function a(e){var t=arguments.length<=1||void 0===arguments[1]?"dd/mm/yyyy":arguments[1];return e=e.match(/\d+/g),e=t.match(/d{2}|m{2}|y{4}/g).reduce(function(t,a,o){return t[a]=+e[o],t},{}),new Date(e.yyyy,e.mm-1,e.dd)}e.exports=a},function(e,t){"use strict";function a(e,t,a){if(1==arguments.length){var o=e;e=o.getFullYear(),t=o.getMonth(),a=o.getDate()}return("0"+a).slice(-2)+"/"+("0"+(t+1)).slice(-2)+"/"+("000"+e).slice(-4)}e.exports=a},function(e,t){e.exports='<header class="opal-calendar__header"> <button class="opal-calendar__btn-prev-month" disabled="{btnPrevMonthDisabled}"> <svg viewBox="0 0 32 28" class="opal-calendar__icon-arrow-left"><use xlink:href="#opal-calendar__icon-arrow-left"></use></svg> </button> <opal-select class="opal-calendar__s-month" size="s" value="[\'{shownMonth}\']"> <template is="rt-repeat" class="opal-select__menu-inner" for="month of constructor.i18n.months"> <opal-select-option value="{$index}" text="{month}"></opal-select-option> </template> </opal-select> <opal-select class="opal-calendar__s-year" size="s" value="[\'{shownYear}\']"> <template is="rt-repeat" class="opal-select__menu-inner" for="year of years"> <opal-select-option value="{year}" text="{year}"></opal-select-option> </template> </opal-select> <button class="opal-calendar__btn-next-month" disabled="{btnNextMonthDisabled}"> <svg viewBox="0 0 32 28" class="opal-calendar__icon-arrow-right"><use xlink:href="#opal-calendar__icon-arrow-left"></use></svg> </button> </header> <div class="opal-calendar__body"> <table class="opal-calendar__week-days"> <tbody><tr class="opal-calendar__week-days-row"> <template is="rt-repeat" for="weekDay of weekDaysShort"> <td class="opal-calendar__week-day">{weekDay}</td> </template> </tr> </tbody></table> <table class="opal-calendar__days"> <template is="rt-repeat" for="weekDays of days"> <tr class="opal-calendar__days-row"> <template is="rt-repeat" for="day of weekDays"> <td class="opal-calendar__day" not-in-current-month="{day.notInCurrentMonth}" today="{day.today}" selected="{day.selected}" disabled="{day.disabled}" tabindex="{day.tabIndex}" data-date="{day.date}" rt-click="_onDayClick">{day.value}</td> </template> </tr> </template> </table> </div>'}])});